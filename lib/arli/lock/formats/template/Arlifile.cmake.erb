# vi:syntax=cmake
#
# © 2017 Konstantin Gredeskoul
#   Distributed under MIT license.
#
# NOTE: This file has been auto-generated by the Arli library manager
# which integrates with another project `arduino-cmake`. If you are
# curious as to how you can build complex Arduino Projects using Arli,
# we suggest that you run the following commands to explore Arli:
# 
#      arli generate MyTestProject --workspace ~/workspace
#      cd ~/workspace/MyTestProject
#      mkdir build; cd build
#      cmake ..
#      make                        <— builds your firmware
#      make upload                 <— uploads your firmware to the device
#      make MyTestProject-serial   <— starts a screen session with serial connection
#
# And you should see a binary image built for the default board, or the 
# board you specified in the Arlifile.
#
# For more info:
#   See https://github.com/kigster/arli
#   See https://github.com/kigster/arli-cmake
#   See https://github.com/kigster/arduino-cmake

set(ARLI_CUSTOM_LIBS_PATH "<%= arli_library_path %>")

set(ARLI_CUSTOM_LIBS <% libraries.each do |library| %>
      <%= library.canonical_dir %><% end %>)

set(ARLI_ARDUINO_HARDWARE_LIBS <% hardware_libraries.each do |library| %>
      <%= library.name %><% end %>)

set(ARLI_ARDUINO_LIBS <% arduino_libraries.each do |library| %>
      <%= library.name %><% end %>)

<% libraries.each do |library| %><% if library.depends %><%= cmake_dependencies(library) %><% end %><% end %>

<% device_libraries_headers_only.each do |library| %>set(<%= library.name %>_ONLY_HEADER yes)<% end %>
<% custom_libraries_headers_only.each do |library| %>set(<%= library.canonical_dir %>_ONLY_HEADER yes)<% end %>

include(Arli)

arli_detect_serial_device("/dev/null")

<% if board && cpu %>arli_detect_board("<%= board %>" "<%= cpu %>")<% end %>

message(STATUS "HARDWARE:\n   • BOARD_DEVICE=[${BOARD_DEVICE}]\n   • BOARD_NAME=[${BOARD_NAME}]\n   • BOARD_CPU=[${BOARD_CPU}]")

arli_build_all_libraries()
